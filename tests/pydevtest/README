This file explains how to use this pydevtest directory...
It is currently written for Terrell by Terrell, but hopefully can be made more generic over time.




on local:
---------
cd ~/Desktop/e-irods/tests/pydevtest
rsync -avz --progress ./ tgr@ubuntu1.irods.renci.org:~/e-irods/tests/pydevtest/

as tgr on ubuntu1:
------------------
cd e-irods
sudo ./packaging/build.sh -c icat postgres
sudo dpkg -i linux-2.6-amd64/e-irods-3.0b2-linux-2.6-amd64.deb
sudo su - eirods

as eirods on ubuntu1:
---------------------
export PATH=/projects/irods/gardenbin/ubuntu-10.04/bin:/projects/irods/gardenbin/Linux/bin:$PATH
cd /var/lib/e-irods/tests/pydevtest

D=`date +%Y%m%dT%H%M%S`;echo "----- SYNCING TEST FILES -----";rsync -avz /home/tgr/e-irods/tests/pydevtest/ ./;echo "----- GENERATING COVERAGE BASELINE -----";/var/lib/e-irods/tests/coverage-pre.sh 2>&1 | tail -n1;echo "----- RUNNING TESTS -----";nosetests *.py;if [ "$?" == "0" ]; then echo "----- GENERATING COVERAGE REPORT -----";/var/lib/e-irods/tests/coverage-post.sh 2>&1 | tail -n4;echo "--> coverageresults-$D";mv /var/lib/e-irods/coverageresults coverageresults-$D; fi

rsync -az ./coverageresults-$D/ tgr@wwwserver-1.renci.org:~/public_html/dev/
rm -rf coverageresults* *.pyc; ls -alrt




#################################
#!/bin/bash

# get datestamp
D=`date +%Y%m%dT%H%M%S`

# sync
echo "----- SYNCING TEST FILES -----"
rsync -avz /home/tgr/e-irods/tests/pydevtest/ ./

# coverage baseline
echo "----- GENERATING COVERAGE BASELINE -----"
/var/lib/e-irods/tests/coverage-pre.sh 2>&1 | tail -n1

# tests
echo "----- RUNNING TESTS -----"
nosetests *.py

# coverage report
if [ "$?" == "0" ] ; then
  echo "----- GENERATING COVERAGE REPORT -----"
  /var/lib/e-irods/tests/coverage-post.sh 2>&1 | tail -n4
  echo "--> coverageresults-$D"
  mv /var/lib/e-irods/coverageresults coverageresults-$D
fi
